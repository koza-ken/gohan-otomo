# 🚀 リリース前チェックリスト

## 概要
「お供だち」本番リリース前の確認項目です。テスト自動化可能な項目と手作業確認が必要な項目に分類しています。

---

## ✅ 完了項目

### 技術基盤
- [x] Active Storage設定修正（`config/active_storage.yml`追加）
- [x] Cloudinary接続確認（認証情報正常読み込み）
- [x] 利用規約ページ実装
- [x] プライバシーポリシーページ実装
- [x] Google Analytics設定（本番環境のみ）
- [x] エラーページ日本語化（404, 500）
- [x] 全体日本語化対応（Devise, バリデーション）

---

## 🤖 テスト自動化で確認可能な項目

### 基本機能テスト
- [ ] ユーザー認証機能（登録・ログイン・ログアウト）
- [ ] 投稿CRUD操作（作成・表示・編集・削除）
- [ ] コメント機能（投稿・削除・表示）
- [ ] いいね機能（追加・削除・カウント）
- [ ] 検索機能（キーワード検索・ページネーション）
- [ ] プロフィール機能（表示・編集）

### 画像関連機能
- [ ] 画像アップロード（Active Storage）
- [ ] 画像表示（Cloudinary配信）
- [ ] WebP画像最適化
- [ ] 楽天API画像取得
- [ ] 画像のvariant生成（thumbnail, medium）

### セキュリティ基本設定
- [ ] CSRFトークン設定
- [ ] XSS対策（HTMLエスケープ）
- [ ] セキュリティヘッダー（X-Frame-Options等）
- [ ] バリデーション機能
- [ ] 認可機能（投稿・コメント編集権限）

### UI/UX
- [ ] レスポンシブ表示（モバイル・デスクトップ）
- [ ] フォームバリデーションエラー表示
- [ ] フラッシュメッセージ表示
- [ ] ページネーション動作
- [ ] Ajax機能（いいね・コメント）

### 実行コマンド
```bash
# 全テスト実行
docker compose exec web bundle exec rspec

# 特定のテストのみ
docker compose exec web bundle exec rspec spec/system/
docker compose exec web bundle exec rspec spec/requests/
docker compose exec web bundle exec rspec spec/models/
```

---

## ⚠️ 手作業確認が必要な項目

### 本番環境での動作確認
- [ ] 画像アップロード・表示の実際の動作
- [ ] Cloudinary画像配信速度
- [ ] Google Analytics動作確認
- [ ] 楽天API実際の商品検索・画像取得
- [ ] SSL証明書の有効性確認

### ブラウザ・デバイス確認
- [ ] Chrome・Safari・Firefoxでの表示
- [ ] スマートフォン実機での操作性
- [ ] タブレット表示確認

### パフォーマンス
- [ ] ページ読み込み速度測定
- [ ] 画像最適化効果確認
- [ ] データベースパフォーマンス

### 法的・運用面
- [ ] 利用規約・プライバシーポリシーページの表示・リンク
- [ ] エラーページ（404, 500）の表示
- [ ] お問い合わせ方法の明記状況

### セキュリティ（本番環境）
- [ ] HTTPS強制リダイレクト
- [ ] SSL証明書の有効期限
- [ ] セキュリティヘッダーの実際の送信状況
- [ ] 機密情報の漏洩チェック

---

## 🎯 重要度別優先順位

### 🔴 **Critical（リリース必須）**
- [ ] 画像アップロード・表示の動作
- [ ] ユーザー認証機能
- [ ] 投稿・コメント基本機能
- [ ] HTTPS設定

### 🟡 **High（リリース前推奨）**
- [ ] レスポンシブ表示確認
- [ ] セキュリティヘッダー設定
- [ ] エラーページ表示
- [ ] Google Analytics動作

### 🟢 **Medium（リリース後対応可能）**
- [ ] パフォーマンス最適化
- [ ] 複数ブラウザ対応確認
- [ ] 楽天API詳細機能

---

## 📋 チェック実行手順

### 1. 自動テスト実行
```bash
# テストDB準備
docker compose exec web rails db:test:prepare

# 全テスト実行
docker compose exec web bundle exec rspec

# 結果確認
# - 全テストが成功することを確認
# - 失敗がある場合は修正後再実行
```

### 2. 本番環境手作業確認
1. 本番サイトにアクセス
2. ユーザー登録・ログイン
3. 画像付き投稿作成
4. コメント・いいね機能確認
5. 各ページの表示確認

### 3. セキュリティ確認
```bash
# セキュリティヘッダー確認例
curl -I https://your-site.com | grep -E "(X-Frame-Options|X-Content-Type-Options|Strict-Transport-Security)"
```

---

## 📝 チェック完了記録

### チェック実行日: ___________
### 実行者: ___________

#### 自動テスト結果
- [ ] 全テスト成功
- [ ] 失敗テストなし
- 実行日時: ___________

#### 手作業確認結果
- [ ] 画像アップロード: 正常
- [ ] 基本機能: 正常
- [ ] レスポンシブ: 正常
- [ ] HTTPS: 正常
- 確認日時: ___________

#### 問題・改善点
```
# 発見した問題や改善点を記録
```

---

## 🔄 継続的改善

### 次回リリース時の改善点
- [ ] CI/CDパイプライン導入
- [ ] パフォーマンス監視設定
- [ ] エラー監視設定
- [ ] 自動セキュリティスキャン

### 運用開始後の監視項目
- [ ] エラー発生状況
- [ ] パフォーマンス状況  
- [ ] ユーザー利用状況
- [ ] セキュリティ状況

---

**最終更新**: 2025年9月13日  
**対象バージョン**: 17_adjust_#47