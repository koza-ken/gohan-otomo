<% if @comment.persisted? %>
  <!-- コメント投稿成功時のレスポンス -->

  <!-- コメント一覧全体を更新（「まだコメントがありません」問題を解決） -->
  <%= turbo_stream.replace "comments_list" do %>
    <%= render partial: 'comments/comment', collection: @post.comments.order(created_at: :desc) %>
  <% end %>

  <!-- コメントフォームをリセット -->
  <%= turbo_stream.replace "comment_form" do %>
    <%= render 'comments/form', post: @post, comment: Comment.new %>
  <% end %>

  <!-- コメント数を更新 -->
  <%= turbo_stream.replace "comments_count" do %>
    <%= @post.comments.count %>
  <% end %>

<% else %>
  <!-- コメント投稿エラー時のレスポンス -->
  
  <!-- エラー付きフォームを表示 -->
  <%= turbo_stream.replace "comment_form" do %>
    <%= render 'comments/form', post: @post, comment: @comment %>
  <% end %>

<% end %>