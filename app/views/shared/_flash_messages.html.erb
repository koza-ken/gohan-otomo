<!-- フロート型フラッシュメッセージコンテナ -->
<div id="flash-container" class="fixed top-20 left-1/2 transform -translate-x-1/2 z-50 space-y-2">
  <% flash.each_with_index do |(type, message), index| %>
    <% case type.to_sym %>
    <% when :notice %>
      <div data-controller="flash"
           data-flash-timeout-value="3000"
           style="animation-delay: <%= index * 200 %>ms"
           class="flash-message bg-amber-50 border border-orange-200 rounded-lg shadow-md p-4 min-w-80 max-w-96 cursor-pointer transform -translate-y-full opacity-0 animate-slide-down">
        <div class="flex items-start">
          <div class="flex-1 min-w-0">
            <p class="text-sm font-medium text-orange-800"><%= message %></p>
          </div>
          <button type="button" class="ml-2 text-orange-400 hover:text-orange-600">
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
          </button>
        </div>
      </div>
    <% when :alert %>
      <div data-controller="flash"
           data-flash-timeout-value="4000"
           style="animation-delay: <%= index * 200 %>ms"
           class="flash-message bg-amber-50 border border-orange-300 rounded-lg shadow-md p-4 min-w-80 max-w-96 cursor-pointer transform -translate-y-full opacity-0 animate-slide-down">
        <div class="flex items-start">
          <div class="flex-1 min-w-0">
            <p class="text-sm font-medium text-orange-900"><%= message %></p>
          </div>
          <button type="button" class="ml-2 text-orange-400 hover:text-orange-600">
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
          </button>
        </div>
      </div>
    <% else %>
      <div data-controller="flash"
           data-flash-timeout-value="3500"
           style="animation-delay: <%= index * 200 %>ms"
           class="flash-message bg-amber-50 border border-orange-200 rounded-lg shadow-md p-4 min-w-80 max-w-96 cursor-pointer transform -translate-y-full opacity-0 animate-slide-down">
        <div class="flex items-start">
          <div class="flex-1 min-w-0">
            <p class="text-sm font-medium text-orange-800"><%= message %></p>
          </div>
          <button type="button" class="ml-2 text-orange-400 hover:text-orange-600">
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
          </button>
        </div>
      </div>
    <% end %>
  <% end %>
</div>

<style>
  @keyframes slide-down {
    0% {
      transform: translateY(-100%);
      opacity: 0;
    }
    100% {
      transform: translateY(0);
      opacity: 1;
    }
  }

  .animate-slide-down {
    animation: slide-down 0.3s ease-out forwards;
  }
</style>
