<% if user_signed_in? %>
  <div class="flex items-center space-x-4">
    <!-- デスクトップ用メニュー（lg以上で表示） -->
    <div class="hidden lg:flex items-center space-x-4">
      <%= link_to posts_path,
          class: "text-white hover:text-orange-100 transition duration-300 px-3 py-2 rounded-full hover:bg-white/10 text-lg font-medium" do %>
          みんなのお供だち
      <% end %>

      <%= link_to new_post_path,
          class: "text-white hover:text-orange-100 transition duration-300 px-3 py-2 rounded-full hover:bg-white/10 text-lg font-medium" do %>
          お供だちを紹介
      <% end %>

      <%= link_to posts_path(user_id: current_user.id),
          class: "text-white hover:text-orange-100 transition duration-300 px-3 py-2 rounded-full hover:bg-white/10 text-lg font-medium" do %>
          マイページ
      <% end %>

      <%= link_to edit_user_registration_path,
          class: "text-white hover:text-orange-100 transition duration-300 px-3 py-2 rounded-full hover:bg-white/10 text-lg font-medium" do %>
          設定
      <% end %>

      <%= button_to destroy_user_session_path, method: :delete,
          data: { turbo_confirm: "ログアウトしますか？" },
          class: "text-white hover:text-orange-100 transition duration-300 px-3 py-2 rounded-full hover:bg-red-500/20 text-lg font-medium border-0 bg-transparent cursor-pointer" do %>
          ログアウト
      <% end %>
    </div>

    <!-- タブレット・スマホ用ハンバーガーメニュー（lg未満で表示） -->
    <div class="flex items-center space-x-3 lg:hidden">
      <!-- みんなのお供リンク -->
      <%= link_to posts_path,
          class: "text-white hover:text-orange-100 transition duration-300 text-md font-medium mr-4" do %>
          みんなのお供だち
      <% end %>

      <div class="relative" data-controller="dropdown">
        <!-- ハンバーガーボタン -->
      <button class="flex items-center justify-center w-10 h-10 text-white hover:text-orange-100 transition duration-300 bg-white/10 rounded-full hover:bg-white/20"
              data-action="click->dropdown#toggle">
        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>

      <!-- ドロップダウンメニュー -->
      <div class="absolute right-0 mt-2 pl-2 w-36 bg-white rounded-xl shadow-2xl border border-orange-100 opacity-0 invisible transition-all duration-300 transform translate-y-2 z-50"
           data-dropdown-target="menu">
        <div class="py-2">
          <!-- 新規投稿 -->
          <%= link_to new_post_path,
              class: "flex items-center px-2 py-1 text-gray-700 hover:bg-orange-50 hover:text-orange-600 transition duration-200" do %>
            <%# <span class="mr-3 text-lg">✍️</span> %>
            <div>
              <div class="text-base font-medium">新しいお供だち</div>
            </div>
          <% end %>

          <!-- 区切り線 -->
          <div class="border-t border-gray-100 my-2"></div>

          <!-- マイページ -->
          <%= link_to posts_path(user_id: current_user.id),
              class: "flex items-center px-2 py-1 text-gray-700 hover:bg-orange-50 hover:text-orange-600 transition duration-200" do %>
            <%# <span class="mr-3 text-lg">📝</span> %>
            <div>
              <div class="text-base font-medium">マイページ</div>
            </div>
          <% end %>

          <!-- 区切り線 -->
          <div class="border-t border-gray-100 my-2"></div>

          <!-- アカウント設定 -->
          <%= link_to edit_user_registration_path,
              class: "flex items-center px-2 py-1 text-gray-700 hover:bg-orange-50 hover:text-orange-600 transition duration-200" do %>
            <%# <span class="mr-3 text-lg">⚙️</span> %>
            <div>
              <div class="text-base font-medium">アカウント設定</div>
            </div>
          <% end %>

          <!-- 区切り線 -->
          <div class="border-t border-gray-100 my-2"></div>

          <!-- ログアウト -->
          <%= button_to destroy_user_session_path, method: :delete,
              data: { turbo_confirm: "ログアウトしますか？" },
              class: "flex items-center px-2 py-1 text-gray-700 hover:bg-red-50 hover:text-red-600 transition duration-200 w-full text-left border-0 bg-transparent cursor-pointer" do %>
            <%# <span class="mr-3 text-lg">🚪</span> %>
            <div>
              <div class="text-base font-medium">ログアウト</div>
            </div>
          <% end %>
        </div>
      </div>
      </div>
    </div>
  </div>
<% else %>
  <div class="flex items-center space-x-4">
    <!-- みんなのお供リンク -->
    <%= link_to posts_path,
        class: "text-white hover:text-orange-100 transition duration-300 text-lg font-medium mr-10" do %>
        <span class="hidden sm:inline">みんなのお供だち</span>
    <% end %>

    <%= link_to "ログイン", new_user_session_path,
                class: "bg-white text-orange-600 px-6 py-2 rounded-full hover:bg-orange-50 transition duration-300 text-sm font-medium shadow-sm border border-orange-200" %>
  </div>
<% end %>
